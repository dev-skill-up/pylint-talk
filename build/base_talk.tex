\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{textcomp}
\usepackage{fancyvrb}

\newcommand{\passthrough}[1]{\lstset{mathescape=false}#1\lstset{mathescape=true}}
\newcommand{\tightlist}{}

\title{PyLint: The Good, The Bad, and the Ugly}
\author{Moshe Zadka -- https://cobordism.com}
\date{}

\begin{document}
\begin{titlepage}
\maketitle
\end{titlepage}

\frame{\titlepage}

\begin{frame}
\frametitle{Acknowledgement of Country}

Belmont (in San Francisco Bay Area Peninsula)

Ancestral homeland of the Ramaytush Ohlone people

\end{frame}

I live in Belmont, in the San Francisco Bay Area Peninsula. I wish to
acknowledge it as the ancestral homeland of the Ramaytush Ohlone people.

\hypertarget{the-good-3m}{%
\subsection{The Good (3m)}\label{the-good-3m}}

\hypertarget{redefine-function}{%
\subsubsection{Redefine function}\label{redefine-function}}

\begin{frame}[fragile]
\frametitle{Redefining functions}

\begin{lstlisting}[language=Python]
def test_add_small():
    # Math, am I right?
    assert 1 + 1 == 3
    
def test_add_large():
    assert 5 + 6 == 11
    
def test_add_small():
    assert 1 + 10 == 11
\end{lstlisting}

\end{frame}

\hypertarget{test-works}{%
\subsubsection{Test works}\label{test-works}}

\begin{frame}[fragile]
\frametitle{Test works!}

\begin{lstlisting}
collected 2 items                                                                         

test.py .. 
2 passed 
\end{lstlisting}

\end{frame}

\hypertarget{pylint-finds-it}{%
\subsubsection{Pylint finds it}\label{pylint-finds-it}}

\begin{frame}[fragile]
\frametitle{PyLint: The Good}

\begin{lstlisting}
test.py:8:0: E0102: function already defined line 1
     (function-redefined)
\end{lstlisting}

\end{frame}

\hypertarget{the-bad}{%
\subsection{The Bad}\label{the-bad}}

\begin{frame}[fragile]
\frametitle{PyLint: The Bad}

\begin{lstlisting}[language=Python]
"""Inventory abstractions"""

import attrs

@attrs.define
class Laptop:
    """A laptop"""
    ident: str
    cpu: str
\end{lstlisting}

\end{frame}

\begin{frame}[fragile]
\frametitle{PyLint: The Bad}

\begin{lstlisting}
$ pylint laptop.py | sed -n '/^laptop/s/[^ ]*: //p'
R0903: Too few public methods (0/2) (too-few-public-methods)
\end{lstlisting}

\end{frame}

\hypertarget{the-ugly-3m}{%
\subsection{The Ugly (3m)}\label{the-ugly-3m}}

\begin{frame}[fragile]
\frametitle{PyLint: The Ugly}

"People will just disable the whole check if it's too picky"

PyLint issue 6987, July 3rd, 2022

\end{frame}

\hypertarget{summary-3m}{%
\subsection{Summary (3m)}\label{summary-3m}}

\hypertarget{pin}{%
\subsubsection{Pin}\label{pin}}

\begin{frame}[fragile]
\frametitle{Pin PyLint}

\begin{lstlisting}
# pyproject.toml

[project.optional-dependencies]
pylint = ["pylint"]
\end{lstlisting}

\end{frame}

\begin{frame}[fragile]
\frametitle{Pin PyLint}

\begin{lstlisting}[language=Python]
# noxfile.py
...
@nox.session(python=VERSIONS[-1])
def refresh_deps(session):
    """Refresh the requirements-*.txt files"""
    session.install("pip-tools")
    for deps in [..., "pylint"]:
        session.run(
            "pip-compile",
            "--extra",
            deps,
            "pyproject.toml",
            "--output-file",
            f"requirements-{deps}.txt",
        )
\end{lstlisting}

\end{frame}

\hypertarget{default-deny}{%
\subsection{Default deny}\label{default-deny}}

\begin{frame}[fragile]
\frametitle{Default Deny}

\begin{lstlisting}[language=Python]
# noxfile.py
...
@nox.session(python="3.10")
def lint(session):
    files = ["src/", "noxfile.py"]
    session.install("-r", "requirements-pylint.txt")
    session.install("-e", ".")
    session.run(
        "pylint",
        "--disable=all",
        *(f"--enable={checker}" for checker in checkers)
        "src",
    )
\end{lstlisting}

\end{frame}

\hypertarget{a-few-of-my-favorite-things}{%
\subsubsection{A Few of My Favorite
Things}\label{a-few-of-my-favorite-things}}

\begin{frame}[fragile]
\frametitle{A few of my favorite things}

\begin{lstlisting}[language=Python]
checkers = [
    "missing-class-docstring",
    "missing-function-docstring",
    "missing-module-docstring",
    "function-redefined",
]
\end{lstlisting}

\end{frame}

\end{document}

\begin{frame}
\frametitle{PyLint}

\begin{itemize}
\item Keep the good: \pause
      CI \pause
      Checkers \pause
\item Lose the bad:
      \pause (default deny)
      \pause
\item Avoid the ugly: \pause
      pin
\end{itemize}

\end{frame}
